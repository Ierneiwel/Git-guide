### 1. Назначение

**`git cherry-pick`** позволяет выборочно применять изменения из одного коммита (или нескольких коммитов) в текущую ветку **без слияния всей истории**.

#### Когда использовать:

✅ **🔥 Хотфиксы** – быстро перенести исправление из `main` в `dev` или другую ветку.  
✅ **🧩 Выборочное копирование** – если нужен только конкретный функционал, а не все изменения из ветки.  
✅ **🚫 Избегание мержа** – когда полное слияние веток нежелательно (например, из-за конфликтов или неготовности кода).  
✅ **Восстановление потерянных коммитов** – если изменения случайно попали не в ту ветку.

---
### 2. Примеры

#### Базовые команды:
```bash
# Перенести один коммит (по хешу)
git cherry-pick abc123

# Перенести несколько коммитов (диапазон)
git cherry-pick start_commit^..end_commit  # ^ означает "включительно с start_commit"

# Перенести коммит, но не создавать автоматический коммит (--no-commit)
git cherry-pick -n abc123
```
#### Работа с конфликтами:
```bash
# Если возник конфликт:
# 1. Редактируем файлы вручную
# 2. Добавляем исправления в индекс
git add .
# 3. Продолжаем cherry-pick
git cherry-pick --continue

# Отменить cherry-pick при конфликте
git cherry-pick --abort

# Пропустить текущий коммит (если в диапазоне)
git cherry-pick --skip
```
#### Дополнительные флаги:
- `-e` – редактировать сообщение коммита перед применением.
- `-x` – добавить в сообщение строку `(cherry picked from commit abc123)` (удобно для трекинга).
- `-s` – добавить подпись (`Signed-off-by`).

---
### 3. Важно

#### ⚠️ Опасности и подводные камни:

- **❗ Дублирование коммитов** – `cherry-pick` создает **новый коммит** с другим хешем, даже если изменения идентичны.
    
- **‼️ Зависимости между коммитами** – если выбранный коммит зависит от других изменений, код может сломаться.
    
- **🔄 Конфликты** – если изменения в целевой ветке противоречат переносимым правкам, придется разрешать вручную.
    
- **🔗 История становится сложнее** – если часто использовать `cherry-pick`, граф коммитов может запутаться.

#### Когда **НЕ стоит** использовать `cherry-pick`:

❌ Если нужно перенести **много коммитов** – лучше сделать `merge` или `rebase`.  
❌ Если коммит **тесно связан с другими изменениями** – можно сломать логику кода.  
❌ Если важно **сохранить оригинальные хеши** коммитов.

---
### 4. Полезные советы

#### 🔹 Как избежать проблем:

Перед `cherry-pick` проверяйте зависимости коммита:
```bash
git show abc123  # посмотреть, что входит в коммит
git log -p abc123^..abc123  # изменения только в этом коммите
```

Используйте `git cherry` для поиска коммитов, которые **еще не были перенесены**:
```bash
git cherry -v main dev  # покажет коммиты из dev, которых нет в main
```

Если нужно перенести **много коммитов**, рассмотрите `rebase --onto` или `merge`.

#### 🔹 Альтернативы:

- **`git rebase --onto`** – если нужно перенести последовательность коммитов.
- **`git merge`** – если нужно объединить всю историю.
- **`git format-patch` + `git am`** – для переноса изменений между разными репозиториями.

#### 🔹 Лучшие практики:

✔️ **Всегда тестируйте** после `cherry-pick` – код может сломаться из-за скрытых зависимостей.  
✔️ **Используйте `-x`** для удобства трекинга (`(cherry picked from commit...)`).  
✔️ **Коммитьте чистые изменения** – если что-то пошло не так, отмените (`--abort`) и попробуйте снова.